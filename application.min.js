!function(e,t){e.encrypt=function(a,n){n="undefined"==typeof n?t.element(document).injector().get("secret"):n;var o=e.CryptoJS.AES.encrypt(a,n);return o.toString()},e.decrypt=function(a,n){n="undefined"==typeof n?t.element(document).injector().get("secret"):n;var o=e.CryptoJS.AES.decrypt(a,n);return o.toString(e.CryptoJS.enc.Utf8)}}(window,angular);var application=angular.module("application",["m","ngAnimate","ngAria","ngMaterial","ngMessageFormat","ngMessages","ngResource","ngRoute","ngSanitize","pouchdb","pascalprecht.translate","application.templates"]);application.config(["$httpProvider",function(e){e.defaults.headers={post:{"Content-Type":"application/json"},put:{"Content-Type":"application/json"},"delete":{"Content-Type":"application/json"}},e.interceptors.push("HttpInterceptor")}]),application.config(["$mdThemingProvider",function(e){e.alwaysWatchTheme(!0),e.theme("cyan").primaryPalette("cyan").accentPalette("indigo"),e.theme("purple").primaryPalette("purple").accentPalette("indigo"),e.theme("red").primaryPalette("red").accentPalette("indigo"),e.theme("teal").primaryPalette("teal").accentPalette("indigo"),e.theme("grey").primaryPalette("grey",{"default":"200"}).accentPalette("blue"),e.theme("white").primaryPalette("grey",{"default":"200"}).accentPalette("blue")}]),application.config(["$translateProvider",function(e){e.useSanitizeValueStrategy("sanitize"),e.preferredLanguage("en")}]),application.config(["$locationProvider","$routeProvider",function(e,t){e.html5Mode(!0).hashPrefix("!#"),t.otherwise({redirectTo:"/todo"})}]),application.factory("Settings",function(){var e={};return e}),application.config(["$routeProvider",function(e){e.when("/todo",{controller:"TodoController",templateUrl:"todo/todo.html",resolve:{isGuest:["Auth",function(e){return e.isGuest()}]}})}]),application.config(["$routeProvider",function(e){e.when("/vpn",{controller:"VpnController",templateUrl:"vpn/vpn.html",resolve:{isGuest:["Auth",function(e){return e.isGuest()}]}})}]),application.config(["$translateProvider",function(e){e.translations("en",{action_back:"Go back",action_cancel:"Cancel",action_change_password:"Update",action_create:"Create",action_create_client:"Create new client",action_create_council:"Create new council",action_create_grant:"Create new grant",action_create_scope:"Create new scope",action_create_user:"Create new user",action_delete:"Delete",action_filter:"Filter",action_hide:"Hide",action_login:"Log in",action_logout:"Log out",action_menu:"Menu",action_more:"More",action_reset:"Reset",action_search:"Search",action_select_person:"Select Person",action_submit:"Submit",action_update:"Update",action_update_client:"Update client",action_update_grant:"Update grant",action_update_scope:"Update scope",dialog_content_delete_record:"Deleted record cannot be restored.",dialog_title_delete_record:"Would you like to delete this record?",label_code:"Code",label_created_at:"Created At",label_current_password:"Current Password",label_description:"Description",label_grant:"Grant",label_id:"Identity",label_name:"Name",label_new_password:"New Password",label_retype_password:"Re-Type Password",label_password:"Password",label_password_confirmation:"Password Confirmation",label_retype_password:"Re-Type Password",label_scope:"Scope",label_secret:"Secret",label_updated_at:"Updated At",label_username:"Username",message_change_password:"Your password has been changed",message_empty_grant:"Empty grant list",message_empty_scope:"Empty scope list",placeholder:"Placeholder",title_access_control:"Access Control",title_administration:"Administration",title_all:"All",title_arrears:"Arrears",title_arrears_management:"Arrears Management",title_assigned:"Assigned",title_cases:"Cases",title_change_password:"Change Password",title_client_grants:"Client Grants",title_client_scopes:"Client Scopes",title_client_management:"Client Management",title_council:"Council",title_dashboard:"Account",title_data_maintenance:"Data Maintenance",title_defaulter:"Defaulter",title_details:"Details",title_download:"Download",title_filter:"Filter",title_first_reminder:"First Reminder",title_grant_management:"Grant Management",title_grants:"Grants",title_history:"History",title_login:"Log In",title_menu:"Menu",title_modules:"Module List",title_notice:"Notice",title_owner:"Owner",title_property:"Property",title_record_count:"Showing total of {{ length }} record",title_scope_management:"Scope Management",title_scopes:"Scopes",title_second_reminder:"Second Reminder",title_settings:"Settings",title_third_reminder:"Third Reminder",title_unassigned:"Unassigned",title_upload:"Upload",title_users:"Users",title_user_management:"User Management",title_vpn_usage_statistics:"Vpn Usage Statistic",title_workforce_management:"Workforce Management",toast_incorrect_credentials:"The user credentials is incorrect.",toast_invalid_refresh_token:"The refresh token is invalid.",toast_method_not_allowed:"Request to the resource is not allowed.",toast_validation_failed:"Validation failed on server.",validation_maxlength_24:"This field may not be greater than 24 characters.",validation_maxlength_255:"This field may not be greater than 255 characters.",validation_maxlength_40:"This field may not be greater than 40 characters.",validation_minlength_4:"This field must be at least 4 characters.",validation_required:"This field is required."})}]),application.config(["$translateProvider",function(e){e.translations("ms",{title_login:"Log masuk",label_username:"Kata nama",label_password:"Kata kunci",button_login:"Log masuk"})}]),application.controller("TodoController",["$interval","$mdSidenav","$scope","pouchDB",function(e,t,a,n){function o(e){({_id:(new Date).toISOString(),title:e,name:e,completed:!1})}function r(){v.allDocs({include_docs:!0,descending:!0},function(e,t){m(t.rows)})}function i(e,t){e.completed=t.target.checked,v.put(e)}function s(e){v.remove(e)}function c(e,t){var a=t.target.value.trim();a?(e.title=a,v.put(e)):v.remove(e)}function l(){y.setAttribute("data-sync-state","syncing");var e={live:!0};v.replicate.to(w,e,d),v.replicate.from(w,e,d)}function d(){y.setAttribute("data-sync-state","error")}function u(e){var t=document.getElementById("li_"+e._id),a=document.getElementById("input_"+e._id);t.className="editing",a.focus()}function _(e,t){if(t.keyCode===h){var a=document.getElementById("input_"+e._id);a.blur()}}function p(e){var t=document.createElement("input");t.className="toggle",t.type="checkbox",t.addEventListener("change",i.bind(this,e));var a=document.createElement("label");a.appendChild(document.createTextNode(e.title)),a.addEventListener("dblclick",u.bind(this,e));var n=document.createElement("button");n.className="destroy",n.addEventListener("click",s.bind(this,e));var o=document.createElement("div");o.className="view",o.appendChild(t),o.appendChild(a),o.appendChild(n);var r=document.createElement("input");r.id="input_"+e._id,r.className="edit",r.value=e.title,r.addEventListener("keypress",_.bind(this,e)),r.addEventListener("blur",c.bind(this,e));var l=document.createElement("li");return l.id="li_"+e._id,l.appendChild(o),l.appendChild(r),e.completed&&(l.className+="complete",t.checked=!0),l}function m(e){var t=document.getElementById("todo-list");t.innerHTML="",e.forEach(function(e){t.appendChild(p(e.doc))})}function g(e){e.keyCode===h&&(o(b.value),b.value="")}function f(){b.addEventListener("keypress",g,!1)}a.theme="teal",a.close=function(){t("menu").close()},a.menu=function(){t("menu").open()},a.query={username:""},a.vpn=function(){$location.path("/vpn")},a.reset=function(){a.query.$=""};var h=13,b=document.getElementById("new-todo"),y=document.getElementById("sync-wrapper"),v=new n("todos"),w=!1;v.changes({since:"now",live:!0}).on("change",r),f(),r(),w&&l()}]),application.controller("VpnController",["$location","$interval","$mdSidenav","$scope",function(e,t,a,n){n.theme="teal",n.close=function(){a("menu").close()},n.menu=function(){a("menu").open()},n.query={username:""},n.reset=function(){n.query.$=""};var o="img/list/60.jpeg";n.messages=[{face:o,username:"hafiz91",no:"0123456789",times:"8.23 A.M",start_date:"09 October 2015",end_date:"14 October 2015",usage:" 3.6 GB"},{face:o,username:"liya",no:"0123456789",times:"8.23 A.M",start_date:"09 October 2015",end_date:"14 October 2015",usage:" 3.7 GB"},{face:o,username:"boyoku",no:"0123456789",times:"8.23 A.M",start_date:"09 October 2015",end_date:"14 October 2015",usage:" 7.6 GB"},{face:o,username:"liyan",no:"0123456789",times:"8.23 A.M",start_date:"09 October 2015",end_date:"14 October 2015",usage:" 2.7 GB"},{face:o,username:"erumburger",no:"0123456789",times:"8.23 A.M",start_date:"09 October 2015",end_date:"14 October 2015",usage:" 6.1 GB"},{face:o,username:"limin",no:"0123456789",times:"8.23 A.M",start_date:"09 October 2015",end_date:"14 October 2015",usage:" 7.5 GB"},{face:o,username:"bapasapar",no:"0123456789",times:"8.23 A.M",start_date:"09 October 2015",end_date:"14 October 2015",usage:" 800 MB"},{face:o,username:"azmie",no:"0123456789",times:"8.23 A.M",start_date:"09 October 2015",end_date:"14 October 2015",usage:" 900 MB"},{face:o,username:"maznah",no:"0123456789",times:"8.23 A.M",start_date:"09 October 2015",end_date:"14 October 2015",usage:" 3.8 GB"},{face:o,username:"nurjianah",no:"0123456789",times:"8.23 A.M",start_date:"09 October 2015",end_date:"14 October 2015",usage:" 2.9 GB"},{face:o,username:"maxsam",no:"0123456789",times:"8.23 A.M",start_date:"10 October 2015",end_date:"15 October 2015",usage:" 3.9 GB"},{face:o,username:"ayub",no:"0123456789",times:"8.23 A.M",start_date:"10 October 2015",end_date:"15 October 2015",usage:" 4.1 GB"},{face:o,username:"uncle",no:"0123456789",times:"8.23 A.M",start_date:"10 October 2015",end_date:"15 October 2015",usage:" 700 MB"},{face:o,username:"wahab",no:"0123456789",times:"8.23 A.M",start_date:"10 October 2015",end_date:"15 October 2015",usage:" 3.5 GB"},{face:o,username:"alan",no:"0123456789",times:"8.23 A.M",start_date:"10 October 2015",end_date:"15 October 2015",usage:" 2.8 GB"},{face:o,username:"kadir",no:"0123456789",times:"8.23 A.M",start_date:"10 October 2015",end_date:"15 October 2015",usage:" 5.7 GB"},{face:o,username:"rayzal",no:"0123456789",times:"8.23 A.M",start_date:"10 October 2015",end_date:"15 October 2015",usage:" 4.7 GB"},{face:o,username:"wahab",no:"0123456789",times:"8.23 A.M",start_date:"10 October 2015",end_date:"15 October 2015",usage:" amie GB"},{face:o,username:"ayiem",no:"0123456789",times:"8.23 A.M",start_date:"12 October 2015",end_date:"17 October 2015",usage:" 500 MB"},{face:o,username:"adipusher",no:"0123456789",times:"8.23 A.M",start_date:"12 October 2015",end_date:"17 October 2015",usage:" 2.4 GB"},{face:o,username:"adythrasher",no:"0123456789",times:"8.23 A.M",start_date:"13 October 2015",end_date:"18 October 2015",usage:" 0 MB"},{face:o,username:"PoulJoshua",no:"01131502845",times:"8.40 A.M",start_date:"13 October 2015",end_date:"18 October 2015",usage:" 0 MB"},{face:o,username:"mohdafiq",no:"01131502845",times:"8.50 A.M",start_date:"13 October 2015",end_date:"18 October 2015",usage:" 0 MB"},{face:o,username:"0168257662",no:"0168257662",times:"8.50 A.M",start_date:"13 October 2015",end_date:"18 October 2015",usage:" 0 MB"},{face:o,username:"0168201979",no:"0168201979",times:"8.50 A.M",start_date:"14 October 2015",end_date:"19 October 2015",usage:" 0 MB"},{face:o,username:"0168455248",no:"0168455248",times:"8.50 A.M",start_date:"14 October 2015",end_date:"19 October 2015",usage:" 0 MB"}]}]),application.controller("TodoMenuController",["$location","$scope",function(e,t){t.todo=function(){e.path("/todo")},t.vpn=function(){e.path("/vpn")}}]),application.factory("API",["Settings",function(e){var t={};return t.access_token="/api/access_token",t.session="/api/session",t.users="/api/users/:user_id",t.userScopes="/api/users/:user_id/scopes/:scope_id",t.scopes="/api/scopes/:scope_id",t.grants="/api/grants/:grant_id",t.grantScopes="/api/grants/:grant_id/scopes/:scope_id",t.clients="/api/clients/:client_id",t.clientGrants="/api/clients/:client_id/grants/:grant_id",t.clientScopes="/api/clients/:client_id/scopes/:scope_id",t.councils="/api/councils/:council_id",t.get=function(a){return e.host.concat(t[a])},t}]),application.factory("Auth",["$http","$location","$q","$window","API","Settings",function(e,t,a,n,o,r){var i={};return i.forget=function(){var e=a.defer();return n.localStorage.removeItem("expires_in"),n.localStorage.removeItem("access_token"),n.localStorage.removeItem("refresh_token"),n.localStorage.removeItem("token_type"),n.localStorage.removeItem("id"),n.localStorage.removeItem("type"),n.localStorage.removeItem("scopes"),t.path("/login"),e.resolve(),e.promise},i.handler=function(e){return n.localStorage.expires_in=e.data.expires_in,n.localStorage.access_token=e.data.access_token,n.localStorage.refresh_token=e.data.refresh_token,n.localStorage.token_type=e.data.token_type,e},i.id=function(){return n.localStorage.hasOwnProperty("id")?angular.fromJson(n.localStorage.id):!1},i.isGuest=function(){var e=a.defer();return i.isLogged().then(function(){e.reject("auth.is_guest")})["catch"](function(){e.resolve(!0)}),e.promise},i.isLogged=function(){var e=a.defer();return n.localStorage.hasOwnProperty("expires_in")&&n.localStorage.hasOwnProperty("access_token")&&n.localStorage.hasOwnProperty("refresh_token")&&n.localStorage.hasOwnProperty("token_type")?e.resolve(!0):e.reject("auth.is_logged"),e.promise},i.refresh=function(){var t={grant_type:"refresh_token",client_id:r.client_id,client_secret:r.client_secret,scope:r.scopes.join(),refresh_token:n.localStorage.refresh_token};return e.post(o.get("access_token"),t).then(i.handler)},i.scopes=function(){return n.localStorage.hasOwnProperty("scopes")?angular.fromJson(n.localStorage.scopes):!1},i.session=function(){return e.get(o.get("session")).then(function(e){console.info(e),n.localStorage.id=angular.toJson(e.data.id),n.localStorage.type=angular.toJson(e.data.type),n.localStorage.scopes=angular.toJson(e.data.scopes)})},i.type=function(){return n.localStorage.hasOwnProperty("type")?angular.fromJson(n.localStorage.type):!1},i.verify=function(t){var a={grant_type:"password",client_id:r.client_id,client_secret:r.client_secret,scope:r.scopes.join(),username:t.username,password:t.password};return e.post(o.get("access_token"),a).then(i.handler)},i}]),application.factory("HttpInterceptor",["$injector","$q","$translate","$window",function(e,t,a,n){var o=null,r={};return r.request=function(t){if(e.get("Auth").isLogged()){var a=n.localStorage.token_type,o=n.localStorage.access_token;t.headers.Authorization=a+" "+o}return t},r.responseError=function(n){switch(console.error(n),n.status){case 401:return o=o?o:e.get("Auth").refresh(),o["finally"](function(){o=null}).then(function(){return e.get("$http")(n.config)});case 405:return a("toast_method_not_allowed").then(function(t){var a=e.get("$mdToast"),n=a.simple().content(t).position("bottom left right");a.show(n)}),t.reject(n);case 422:return a("toast_validation_failed").then(function(t){var a=e.get("$mdToast"),n=a.simple().content(t).position("bottom left right");a.show(n)}),t.reject(n);case 500:return"The user credentials were incorrect."==n.data.message?(a("toast_incorrect_credentials").then(function(t){var a=e.get("$mdToast"),n=a.simple().content(t).position("bottom left right");a.show(n)}),t.reject(n)):("The refresh token is invalid."==n.data.message&&a("toast_invalid_refresh_token").then(function(t){var a=e.get("$mdToast"),n=a.simple().content(t).position("bottom left right");a.show(n)}),e.get("Auth").forget(),t.reject(n))}},r}]);
//# sourceMappingURL=application.min.js.map
